#!/bin/bash

# AEGIS v3.0 - 전체 데이터 수집 통합 스크립트
# 실행: bash scripts/RUN_ALL_FUELING.sh
# 소요시간: 글로벌 데이터만 실행 시 2~3분

echo "============================================================"
echo "🚀 AEGIS v3.0 데이터 수집 (빠른 버전)"
echo "============================================================"
echo ""

# 프로젝트 디렉토리로 이동
cd /Users/wonny/Dev/aegis/v3

# 가상환경 활성화
source venv/bin/activate

echo "📋 수집할 데이터:"
echo "   1️⃣ 글로벌 시장 데이터 (48개 지표) - 1~2분"
echo "   2️⃣ 테마 & 뉴스 데이터 - 10초"
echo "   3️⃣ KIS 시장 데이터 (선물/프로그램/베이시스) - 10초"
echo "   4️⃣ 시장 수급 데이터 (투자자별 순매수/대차잔고) - 5~10분"
echo ""
echo "💡 일별 데이터(3년치)와 DART 재무 데이터는 별도 실행 필요"
echo ""

read -p "계속 진행하시겠습니까? (y/n): " confirm

if [ "$confirm" != "y" ]; then
    echo "❌ 취소됨"
    exit 0
fi

echo ""
echo "============================================================"
echo "1️⃣ 글로벌 시장 데이터 수집 중..."
echo "============================================================"
python scripts/init_global_data.py
echo ""

echo "============================================================"
echo "2️⃣ 테마 & 뉴스 데이터 수집 중..."
echo "============================================================"
python scripts/init_theme_data.py
echo ""

echo "============================================================"
echo "3️⃣ KIS 시장 데이터 수집 중..."
echo "============================================================"
python scripts/init_kis_market.py
echo ""

echo "============================================================"
echo "4️⃣ 시장 수급 데이터 수집 중..."
echo "============================================================"
python scripts/init_market_flow.py
echo ""

echo "============================================================"
echo "✅ 전체 데이터 수집 완료!"
echo "============================================================"
echo ""
echo "📊 수집된 데이터:"
echo "   ✅ 글로벌 시장 데이터 (환율, 미국 지수, 반도체, 섹터 ETF 등)"
echo "   ✅ 테마 & 뉴스"
echo "   ✅ KIS 시장 데이터 (외국인 선물, 프로그램 매매, 베이시스)"
echo "   ✅ 투자자별 순매수 & 대차잔고"
echo ""
echo "💡 장기 데이터 수집 (별도 실행):"
echo "   - 3년치 일별 데이터: python scripts/init_daily_data.py"
echo "   - DART 재무 데이터: python scripts/init_dart_data.py"
