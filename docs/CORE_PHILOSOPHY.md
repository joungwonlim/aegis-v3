# AEGIS v3.0 - Core Philosophy (핵심 철학)

*Version: 1.0*
*Last Updated: 2025-12-08*

---

## 🎯 목표

```
"0.001%를 올리기 위해 끊임없이 고민한다"
"1% 수익을 목표로, 우리는 반드시 해낸다"
```

---

## 3대 원칙

### 1. 수익률이 최우선

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  모든 설계와 구현의 목표는 오직 하나: 수익률 향상                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  • 가능성 (Probability): 승률을 높이는 전략                                 │
│  • 확률 (Odds): 기대값이 높은 매매만 실행                                   │
│  • 타이밍 (Timing): 진입/청산 시점 최적화                                   │
│                                                                              │
│  → 0.001%라도 개선할 수 있다면 실행한다                                     │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2. AI 판단은 반드시 검증

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  AI 호출 = 비용 발생 → 가치 있는 판단만 요청                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  모든 AI 분석은 다음을 필수 기록:                                           │
│                                                                              │
│  ┌─────────────┬────────────────────────────────────────────────────┐      │
│  │ model_used  │ 어떤 모델이 판단했는가? (deepseek-chat, r1, opus)  │      │
│  ├─────────────┼────────────────────────────────────────────────────┤      │
│  │ reasoning   │ 왜 이 판단을 했는가? (2-3문장, 구체적으로)         │      │
│  ├─────────────┼────────────────────────────────────────────────────┤      │
│  │ score       │ 점수는 얼마인가? (0-100)                           │      │
│  ├─────────────┼────────────────────────────────────────────────────┤      │
│  │ confidence  │ 확신도는 얼마인가? (0-100)                         │      │
│  ├─────────────┼────────────────────────────────────────────────────┤      │
│  │ timestamp   │ 언제 판단했는가?                                   │      │
│  └─────────────┴────────────────────────────────────────────────────┘      │
│                                                                              │
│  → 사용자가 항상 "왜 이 판단을 했는지" 확인 가능해야 함                     │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3. 결과 기반 보정 (Adaptive Feedback)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  매매 결과 → 점수 보정 → 다음 판단 개선 → 시장 적응                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  [매수] ──→ [보유] ──→ [매도] ──→ [결과 기록]                               │
│                                      │                                       │
│                                      ▼                                       │
│                              ┌─────────────┐                                │
│                              │ result      │ WIN / LOSS                     │
│                              │ profit_rate │ +2.3% / -1.5%                  │
│                              │ feedback    │ +3점 / -2점                    │
│                              └──────┬──────┘                                │
│                                     │                                        │
│                                     ▼                                        │
│                              ┌─────────────┐                                │
│                              │ 점수 보정    │                                │
│                              │ 다음 판단에  │                                │
│                              │ 반영         │                                │
│                              └─────────────┘                                │
│                                                                              │
│  → 틀린 판단은 인정하고 즉시 수정한다                                       │
│  → 시장 변화에 지속적으로 적응한다                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## AI 분석 로그 표준 형식

```python
# 모든 AI 분석은 이 형식으로 기록
ai_analysis_log = {
    # 기본 정보
    "stock_code": "005930",
    "stock_name": "삼성전자",
    "timestamp": "2025-12-08T09:15:30",

    # AI 판단 정보 (필수)
    "model_used": "deepseek-chat",      # 어떤 모델?
    "action": "매수",                    # 무슨 판단?
    "score": 78,                         # 점수?
    "confidence": 85,                    # 확신도?
    "reasoning": "외국인 5일 연속 순매수 +150만주, SOX 지수 +1.09% 상승",  # 왜?

    # 사후 기록 (매도 체결 시)
    "result": "WIN",                     # 결과?
    "profit_rate": 2.3,                  # 수익률?
    "hold_days": 3,                      # 보유 기간?
    "feedback_applied": +3,              # 점수 보정?

    # 메타데이터
    "strategy_type": "Type-D",           # 전략 유형
    "market_regime": "GUERRILLA",        # 시장 국면
}
```

---

## 구현 체크리스트

### 매수 시점
- [ ] AI 모델명 기록 (`model_used`)
- [ ] 판단 근거 기록 (`reasoning`) - 구체적으로!
- [ ] 점수 + 확신도 기록 (`score`, `confidence`)
- [ ] 사용자가 확인 가능한 UI 제공

### 매도 시점
- [ ] 결과 기록 (`result`: WIN/LOSS)
- [ ] 수익률 기록 (`profit_rate`)
- [ ] 보유 기간 기록 (`hold_days`)
- [ ] 피드백 점수 계산 및 반영 (`feedback_applied`)

### 지속적 개선
- [ ] 전략별 승률 추적
- [ ] 모델별 정확도 추적
- [ ] 시장 국면별 성과 분석
- [ ] 주간/월간 리뷰 자동화

---

## 금지 사항

```
❌ AI 추천 이유 없이 맹목적 실행 금지
❌ 결과 검증 없이 다음 매매 진행 금지
❌ 손실 발생 시 원인 분석 없이 넘어가기 금지
❌ reasoning 없는 AI 분석 결과 저장 금지
❌ 피드백 미반영 상태로 동일 전략 반복 금지
```

---

## 성공 지표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 일일 수익률 | +1% 이상 | 일일 정산 |
| AI 판단 정확도 | 60% 이상 | WIN/LOSS 비율 |
| 피드백 반영 속도 | 즉시 | 매도 체결 → 점수 보정 |
| 추적 완전성 | 100% | 모든 거래에 reasoning 존재 |

---

*이 철학은 AEGIS의 모든 설계와 구현의 기준입니다.*
*Document maintained by AEGIS Development Team*
