#!/bin/bash

# AEGIS v3.0 - 전체 데이터 수집 실행 스크립트 (완전판)
# 실행: bash scripts/run_all_data_collection.sh

echo "============================================================"
echo "📊 AEGIS v3.0 전체 데이터 수집 시작"
echo "============================================================"
echo ""

# 프로젝트 디렉토리로 이동
cd /Users/wonny/Dev/aegis/v3

# 가상환경 활성화
source venv/bin/activate

echo "📋 수집 항목:"
echo "   1️⃣ 글로벌 시장 데이터 (48개 지표) - 1~2분"
echo "   2️⃣ 테마 & 뉴스 데이터 - 10초"
echo "   3️⃣ KIS 시장 데이터 (선물/프로그램/베이시스) - 10초"
echo "   4️⃣ 시장 수급 데이터 (투자자별 순매수/대차잔고) - 5~10분"
echo "   5️⃣ 종목 기초 데이터 & 3년 치 과거 데이터 - 2~3시간"
echo "   6️⃣ DART 재무 데이터 - 30분~1시간"
echo ""
echo "⏱️  총 예상 소요시간: 3~4시간"
echo ""

# 1. 글로벌 시장 데이터 (확장판)
echo "============================================================"
echo "1️⃣ 글로벌 시장 데이터 수집 중..."
echo "============================================================"
python scripts/init_global_data.py
echo ""

# 2. 테마 & 뉴스 데이터
echo "============================================================"
echo "2️⃣ 테마 & 뉴스 데이터 수집 중..."
echo "============================================================"
python scripts/init_theme_data.py
echo ""

# 3. KIS 시장 데이터
echo "============================================================"
echo "3️⃣ KIS 시장 데이터 수집 중..."
echo "============================================================"
python scripts/init_kis_market.py
echo ""

# 4. 시장 수급 데이터
echo "============================================================"
echo "4️⃣ 시장 수급 데이터 수집 중..."
echo "============================================================"
python scripts/init_market_flow.py
echo ""

# 5. 종목 기초 데이터 & 3년 치 과거 데이터
echo "============================================================"
echo "5️⃣ 종목 기초 데이터 & 3년 치 과거 데이터 수집 중..."
echo "   (소요시간: 2~3시간 예상)"
echo "============================================================"
python scripts/init_daily_data.py
echo ""

# 6. DART 재무 데이터
echo "============================================================"
echo "6️⃣ DART 재무 데이터 수집 중..."
echo "   (소요시간: 30분~1시간 예상)"
echo "============================================================"
python scripts/init_dart_data.py
echo ""

echo "============================================================"
echo "✅ 전체 데이터 수집 완료!"
echo "============================================================"
echo ""
echo "📊 수집된 데이터:"
echo "   ✅ 글로벌 시장 (48개 지표)"
echo "   ✅ 테마 & 뉴스"
echo "   ✅ KIS 시장 (외국인 선물, 프로그램 매매, 베이시스)"
echo "   ✅ 시장 수급 (투자자별 순매수, 대차잔고)"
echo "   ✅ 3년치 일별 데이터 (2,773개 종목)"
echo "   ✅ DART 재무 데이터"
